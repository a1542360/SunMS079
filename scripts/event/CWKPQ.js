var mapz=[100,200,300,400,500,510,520,521,522,530,540,550,600,700,800],a="abcdefghi".split(""),pos_x=[944,401,28,-332,-855],pos_y=[-204,-384,-504,-384,-204],pos_y2=[-144,-444,-744,-1044,-1344,-1644];function init(){em.setProperty("state","0");em.setProperty("leader","true")}function setup(b,e){em.setProperty("state","1");em.setProperty("leader","true");em.setProperty("current_instance","0");em.setProperty("glpq1","0");em.setProperty("glpq2","0");em.setProperty("glpq3","0");em.setProperty("glpq4","0");em.setProperty("glpq5","0");em.setProperty("glpq6","0");b=em.newInstance("CWKPQ"+e);for(var g=0;g<mapz.length;g++){var c=b.setInstanceMap(61003E4+mapz[g]);if(null!=c)if(c.resetFully(),610030400==c.getId()){c.setReactorState();c.limitReactor(6109016,1);c.limitReactor(6109017,1);c.limitReactor(6109018,1);c.limitReactor(6109019,1);c.limitReactor(6109020,1);c.shuffleReactors(6109016,6109020);c.destroyReactors(6108E3,6108005);for(var d=0;d<a.length;d++)for(var f=1;7>=f;f++)1==d||3==d||4==d||6==d||8==d?2!=f&&4!=f&&5!=f&&7!=f&&c.moveEnvironment(a[d]+""+f,1):c.moveEnvironment(a[d]+""+f,1)}else if(610030510==c.getId())for(d=0;d<pos_y2.length;d++)f=em.getMonster(9400582),b.registerMonster(f),c.spawnMonsterOnGroundBelow(f,new java.awt.Point(0,pos_y2[d]));else if(610030540==c.getId())for(d=0;d<pos_x.length;d++)f=em.getMonster(9400594),b.registerMonster(f),c.spawnMonsterOnGroundBelow(f,new java.awt.Point(pos_x[d],pos_y[d]));else 610030550==c.getId()&&c.shuffleReactors()}b.startEventTimer(12E4);b.schedule("spawnGuardians",6E4);return b}function playerEntry(b,e){b.broadcastPlayerMsg(5,"[Expedition] "+e.getName()+" has entered the map.");var g=b.getMapInstance(610030100+100*parseInt(em.getProperty("current_instance")));e.changeMap(g,g.getPortal(0))}function spawnGuardians(b){var e=b.getMapInstance(0);if(!(0>=e.getCharactersSize())){b.broadcastPlayerMsg(5,"\u4e3b\u4eba\u7684\u5b88\u62a4\u8005\u5df2\u7ecf\u5bdf\u89c9\u5230\u4f60\u3002");for(var g=0;20>g;g++){var c=em.getMonster(9400594);b.registerMonster(c);e.spawnMonsterOnGroundBelow(c,new java.awt.Point(1E3,336))}}}function playerRevive(b,e){}function scheduledTimeout(b){end(b)}function changedMap(b,e,g){if(610030100>g||610030800<g)playerExit(b,e);else switch(g){case 610030200:em.getProperty("current_instance").equals("0")&&(b.restartEventTimer(6E5),em.setProperty("current_instance","1"));break;case 610030300:em.getProperty("current_instance").equals("1")&&(b.restartEventTimer(6E5),em.setProperty("current_instance","2"));break;case 610030400:em.getProperty("current_instance").equals("2")&&(b.restartEventTimer(6E5),em.setProperty("current_instance","3"));break;case 610030500:em.getProperty("current_instance").equals("3")&&(b.restartEventTimer(12E5),em.setProperty("current_instance","4"));break;case 610030600:em.getProperty("current_instance").equals("4")&&(b.restartEventTimer(36E5),em.setProperty("current_instance","5"));break;case 610030800:em.getProperty("current_instance").equals("5")&&(b.restartEventTimer(6E4),em.setProperty("current_instance","6"))}}function playerDisconnected(b,e){return 0}function monsterValue(b,e){return 1}function playerExit(b,e){b.broadcastPlayerMsg(5,"[\u63a2\u9669\u5bb6]  "+e.getName()+" \u5df2\u7ecf\u79bb\u5f00\u4e86\u5730\u56fe\u3002");b.unregisterPlayer(e);b.disposeIfPlayerBelow(0,0)&&(em.setProperty("state","0"),em.setProperty("leader","true"))}function end(b){b.disposeIfPlayerBelow(100,610030010);em.setProperty("state","0");em.setProperty("leader","true")}function clearPQ(b){end(b)}function allMonstersDead(b){}function leftParty(b,e){}function disbandParty(b){}function playerDead(b,e){}function cancelSchedule(){};