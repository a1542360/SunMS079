
/* ==================
 脚本类型: 脚本
 版权：游戏盒团队     
 联系扣扣：297870163    609654666
 =====================
 */var eventmapid=610030600,returnmap=91E7,monster=[8800100,9400300,884E4,1,0,2];function init(){}function setup(a){a=em.newInstance("BossQuest"+a);var b=a.createInstanceMapS(eventmapid);b.toggleDrops();b.spawnNpc(9250156,new java.awt.Point(148,1));a.setProperty("points",0);a.setProperty("monster_number",0);a.setProperty("n_spawn",0);a.setProperty("f_spawn",0);a.setProperty("c_spawn",0);beginQuest(a);return a}function beginQuest(a){null!=a&&a.startEventTimer(5E3)}function monsterSpawn(a){var b=monster[parseInt(a.getProperty("monster_number"))];0==b?0==parseInt(a.getProperty("n_spawn"))?(b=8820015,a.setProperty("n_spawn","1"),monsterSpawn(a)):1==parseInt(a.getProperty("n_spawn"))?(b=8820016,a.setProperty("n_spawn","2"),monsterSpawn(a)):2==parseInt(a.getProperty("n_spawn"))?(b=8820017,a.setProperty("n_spawn","3"),monsterSpawn(a)):3==parseInt(a.getProperty("n_spawn"))&&(b=8820018,a.setProperty("n_spawn","4")):1==b?0==parseInt(a.getProperty("f_spawn"))?(b=9400590,a.setProperty("f_spawn","1"),monsterSpawn(a)):1==parseInt(a.getProperty("f_spawn"))?(b=9400591,a.setProperty("f_spawn","2"),monsterSpawn(a)):2==parseInt(a.getProperty("f_spawn"))?(b=9400592,a.setProperty("f_spawn","3"),monsterSpawn(a)):3==parseInt(a.getProperty("f_spawn"))?(b=9400593,a.setProperty("f_spawn","4"),monsterSpawn(a)):4==parseInt(a.getProperty("f_spawn"))&&(b=9400589):2==b&&(0==parseInt(a.getProperty("c_spawn"))?(b=8850005,a.setProperty("c_spawn","1"),monsterSpawn(a)):1==parseInt(a.getProperty("c_spawn"))?(b=8850006,a.setProperty("c_spawn","2"),monsterSpawn(a)):2==parseInt(a.getProperty("c_spawn"))?(b=8850007,a.setProperty("c_spawn","3"),monsterSpawn(a)):3==parseInt(a.getProperty("c_spawn"))?(b=8850008,a.setProperty("c_spawn","4"),monsterSpawn(a)):4==parseInt(a.getProperty("c_spawn"))&&(b=8850009));var c=em.getMonster(b),d=em.newMonsterStats();d.setOMp(c.getMobMaxMp());switch(b){case 884E4:d.setOExp(c.getMobExp());d.setOHp(2.4*c.getMobMaxHp());break;case 8800100:case 8800101:case 8800102:case 9400289:d.setOExp(c.getMobExp());d.setOHp(1.8*c.getMobMaxHp());break;case 9400300:d.setOExp(c.getMobExp());d.setOHp(6*c.getMobMaxHp());break;case 9400589:case 9400590:case 9400591:case 9400592:case 9400593:d.setOExp(c.getMobExp());d.setOHp(1.1*c.getMobMaxHp());break;case 8850005:case 8850006:case 8850007:case 8850008:case 8850009:d.setOExp(c.getMobExp());d.setOHp(2.2*c.getMobMaxHp());break;case 8820002:case 8820015:case 8820016:case 8820017:case 8820018:d.setOExp(c.getMobExp()),d.setOHp(1.8*c.getMobMaxHp())}c.setOverrideStats(d);a.registerMonster(c);a.getMapInstance(0).spawnMonsterOnGroundBelow(c,new java.awt.Point(0,276))}function playerEntry(a,b){var c=a.getMapInstance(0);b.changeMap(c,c.getPortal(0))}function changedMap(a,b,c){c!=eventmapid&&(a.unregisterPlayer(b),a.disposeIfPlayerBelow(0,0))}function scheduledTimeout(a){var b=parseInt(a.getProperty("monster_number"));b<monster.length?(monsterSpawn(a),a.setProperty("monster_number",b+1)):a.disposeIfPlayerBelow(100,returnmap)}function allMonstersDead(a){a.restartEventTimer(3E3);var b=parseInt(a.getProperty("monster_number")),c=6E3*b,d=parseInt(a.getProperty("points"))+c;a.setProperty("points",d);a.broadcastPlayerMsg(5,"\u4f60\u7684\u56e2\u961f\u8d62\u4e86 "+c+" \u70b9\uff01 \u603b\u5171\u6709 "+d+".");a.saveBossQuest(c);b<monster.length?a.broadcastPlayerMsg(6,"\u51c6\u5907\uff01 \u4e0b\u4e00\u4e2aBOSS\u4f1a\u77a5\u89c1\u773c\u775b!"):(a.saveBossQuest(3E4),a.saveNX(2E5),a.broadcastPlayerMsg(5,"\u4f60\u7684\u961f\u4f0d\u6253\u4e86HELL\u6a21\u5f0f\uff0c\u5e76\u83b7\u5f97\u4e86\u989d\u5916\u768430,000\u70b9\u548c\u989d\u5916\u768440,000\u73b0\u91d1!"),a.giveAchievement(22))}function playerDead(a,b){}function playerRevive(a,b){return!0}function playerDisconnected(a,b){return 0}function monsterValue(a,b){8820002!=b&&8820015!=b&&8820016!=b&&8820017!=b&&8820018!=b||a.getMapInstance(0).killMonster(8820019);return 0}function leftParty(a,b){a.unregisterPlayer(b);var c=em.getMapFactory().getMap(returnmap);b.changeMap(c,c.getPortal(0));a.disposeIfPlayerBelow(0,0)}function disbandParty(a,b){a.disposeIfPlayerBelow(100,returnmap)}function clearPQ(a){}function removePlayer(a,b){a.dispose()}function registerCarnivalParty(a,b){}function onMapLoad(a,b){}function cancelSchedule(){};