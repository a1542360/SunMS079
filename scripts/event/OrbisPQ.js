var minPlayers=2,stg2_combo0=["3","2","1"],stg2_combo1=["0","0","1"],stg2_combo2=["0","1","1"],stg6_combo="00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16".split(" "),cx=[200,-300,-300,-300,200,200,200,-300,-300,200,200,-300,-300,200],cy=[-2321,-2114,-2910,-2510,-1526,-2716,-717,-1310,-3357,-1912,-1122,-1736,-915,-3116];function init(){em.setProperty("state","0");em.setProperty("leader","true")}function setup(a){em.getProperties().clear();em.setProperty("state","1");em.setProperty("leader","true");a=em.newInstance("OrbisPQ"+a);em.setProperty("stage","0");em.setProperty("pre","0");em.setProperty("finished","0");em.setProperty("stage2","0");em.setProperty("stage3","0");em.setProperty("stage4","0");var b=java.lang.Math.floor(java.lang.Math.random()*stg2_combo0.length),d=java.lang.Math.random(),c=.33>d?!0:!1,d=.66>d?!0:!1;em.setProperty("stage4_0",c?stg2_combo0[b]:d?stg2_combo1[b]:stg2_combo2[b]);em.setProperty("stage4_1",c?stg2_combo1[b]:d?stg2_combo2[b]:stg2_combo0[b]);em.setProperty("stage4_2",c?stg2_combo2[b]:d?stg2_combo0[b]:stg2_combo1[b]);em.setProperty("stage6","0");for(b=0;b<stg6_combo.length;b++)for(c=0;4>c;c++)em.setProperty("stage6_"+stg6_combo[b]+""+(c+1)+"","0");for(b=0;b<stg6_combo.length;b++)for(c=!1;!c;)for(d=0;4>d;d++)if(!c){for(var f=!1,e=0;4>e;e++)if(null==em.getProperty("stage6_"+stg6_combo[b]+""+(e+1)+""))em.setProperty("stage6_"+stg6_combo[b]+""+(e+1)+"","0");else if(em.getProperty("stage6_"+stg6_combo[b]+""+(e+1)+"").equals("1")){f=!0;break}if(!f&&.25>java.lang.Math.random()){em.setProperty("stage6_"+stg6_combo[b]+""+(d+1)+"","1");c=!0;break}}for(b=0;3>b;b++)em.setProperty("stage62_"+b+"","0");for(c=!1;!c;)for(b=0;3>b;b++)null==em.getProperty("stage62_"+b+"")?em.setProperty("stage62_"+b+"","0"):!c&&.2>java.lang.Math.random()&&(em.setProperty("stage62_"+b+"","1"),c=!0);for(c=!1;!c;)for(b=0;3>b;b++)null==em.getProperty("stage62_"+b+"")?em.setProperty("stage62_"+b+"","0"):!em.getProperty("stage62_"+b+"").equals("1")&&!c&&.2>java.lang.Math.random()&&(em.setProperty("stage62_"+b+"","1"),c=!0);em.setProperty("stage7","0");em.setProperty("done","0");a.setInstanceMap(92001E4).resetFully();a.setInstanceMap(920010100).resetFully();a.setInstanceMap(920010200).resetFully();a.setInstanceMap(920010300).resetFully();a.setInstanceMap(920010400).resetFully();a.setInstanceMap(920010500).resetFully();a.setInstanceMap(920010600).resetFully();a.setInstanceMap(920010601).resetFully();a.setInstanceMap(920010602).resetFully();a.setInstanceMap(920010603).resetFully();a.setInstanceMap(920010604).resetFully();a.setInstanceMap(920010700).resetFully();a.setInstanceMap(920010800).resetFully();a.setInstanceMap(920010900).resetFully();a.setInstanceMap(920010910).resetFully();a.setInstanceMap(920010911).resetFully();a.setInstanceMap(920010912).resetFully();a.setInstanceMap(920010920).resetFully();a.setInstanceMap(920010921).resetFully();a.setInstanceMap(920010922).resetFully();a.setInstanceMap(920010930).resetFully();a.setInstanceMap(920010931).resetFully();a.setInstanceMap(920010932).resetFully();a.setInstanceMap(920011E3).resetFully();a.setInstanceMap(920011100).resetFully();a.startEventTimer(3E6);return a}function playerEntry(a,b){var d=a.getMapInstance(0);b.changeMap(d,d.getPortal(0));b.tryPartyQuest(1203)}function playerRevive(a,b){}function scheduledTimeout(a){end(a)}function changedMap(a,b,d){92001E4>d||920011100<d?(a.unregisterPlayer(b),a.disposeIfPlayerBelow(0,0)&&(em.setProperty("state","0"),em.setProperty("leader","true"))):920011100==d&&em.getProperty("done").equals("0")&&(em.setProperty("done","1"),a.restartEventTimer(6E4))}function playerDisconnected(a,b){return 0}function monsterValue(a,b){if(9300049==b&&em.getProperty("stage7").equals("0")){a.broadcastPlayerMsg(6,"\u7cbe\u7075\u7238\u7238\u5df2\u7ecf\u884d\u751f.");var d=em.getMonster(9300039);a.registerMonster(d);em.setProperty("stage7","0");a.getMapInstance(12).spawnMonsterOnGroundBelow(d,new java.awt.Point(-830,563))}else if(9300040==b){var c=parseInt(em.getProperty("stage2"));14>c&&(a.broadcastPlayerMsg(6,"\u602a\u7269\u5df2\u7ecf\u5728\u5730\u56fe\u4e0a\u7684\u67d0\u5904\u884d\u751f."),d=em.getMonster(9300040),em.setProperty("stage2",c+1),a.registerMonster(d),a.getMapInstance(3).spawnMonsterOnGroundBelow(d,new java.awt.Point(cx[c],cy[c])))}return 1}function playerExit(a,b){a.unregisterPlayer(b);a.disposeIfPlayerBelow(0,0)&&(em.setProperty("state","0"),em.setProperty("leader","true"))}function end(a){a.disposeIfPlayerBelow(100,em.getProperty("done").equals("0")?920011200:920011300);em.setProperty("state","0");em.setProperty("leader","true")}function clearPQ(a){end(a)}function allMonstersDead(a){}function leftParty(a,b){end(a)}function disbandParty(a){end(a)}function playerDead(a,b){}function cancelSchedule(){};