/* ==================
 脚本类型: 脚本
 版权：游戏盒团队     
 联系扣扣：297870163    609654666
 =====================
 */var minPlayers=6,stg2_combo0=["5","4","3","3","2"],stg2_combo1=["0","0","1","0","1"],stg2_combo2=["0","1","1","2","2"];function init(){em.setProperty("state","0");em.setProperty("leader","true")}function setup(a,c){em.setProperty("state","1");em.setProperty("leader","true");a=em.newInstance("Amoria"+c);em.setProperty("apq1","0");em.setProperty("apq2","0");em.setProperty("apq2_tries","0");em.setProperty("apq3","0");em.setProperty("apq3_tries","0");em.setProperty("apq4","0");em.setProperty("apq5","0");var b=java.lang.Math.floor(java.lang.Math.random()*stg2_combo0.length),e=java.lang.Math.random(),d=.33>e?!0:!1,e=.66>e?!0:!1;em.setProperty("apq2_0",d?stg2_combo0[b]:e?stg2_combo1[b]:stg2_combo2[b]);em.setProperty("apq2_1",d?stg2_combo1[b]:e?stg2_combo2[b]:stg2_combo0[b]);em.setProperty("apq2_2",d?stg2_combo2[b]:e?stg2_combo0[b]:stg2_combo1[b]);for(d=b=0;9>d;d++)em.setProperty("apq3_"+d,"0");for(;5>b;)for(d=0;9>d;d++)em.getProperty("apq3_"+d).equals("0")&&.2>java.lang.Math.random()&&5>b&&(em.setProperty("apq3_"+d,"1"),b++);b=a.setInstanceMap(670010200);b.resetFully();b.getPortal("go00").setPortalState(!1);b.getPortal("go01").setPortalState(!1);b.getPortal("go02").setPortalState(!1);b=a.setInstanceMap(670010300);b.resetFully();b.getPortal("next00").setPortalState(!1);b=a.setInstanceMap(670010400);b.resetFully();b.getPortal("next00").setPortalState(!1);b=a.setInstanceMap(670010500);b.resetFully();b.getPortal("next00").setPortalState(!1);a.setInstanceMap(670010600).resetFully();a.setInstanceMap(670010700).resetFully();a.setInstanceMap(670010800).resetFully();a.startEventTimer(36E5);return a}function playerEntry(a,c){var b=a.getMapInstance(0);c.changeMap(b,b.getPortal(0))}function playerRevive(a,c){}function scheduledTimeout(a){end(a)}function changedMap(a,c,b){670010200>b||670010800<b?(a.unregisterPlayer(c),a.disposeIfPlayerBelow(0,0)&&(em.setProperty("state","0"),em.setProperty("leader","true"))):670010800==b&&em.getProperty("apq5").equals("0")&&(a.restartEventTimer(6E4),em.setProperty("apq5","1"))}function playerDisconnected(a,c){return 0}function monsterValue(a,c){return 1}function playerExit(a,c){a.unregisterPlayer(c);a.disposeIfPlayerBelow(0,0)&&(em.setProperty("state","0"),em.setProperty("leader","true"))}function end(a){a.disposeIfPlayerBelow(100,670011E3);em.setProperty("state","0");em.setProperty("leader","true")}function clearPQ(a){end(a)}function allMonstersDead(a){}function leftParty(a,c){a.getPlayers().size()<minPlayers?end(a):playerExit(a,c)}function disbandParty(a){end(a)}function playerDead(a,c){}function cancelSchedule(){};