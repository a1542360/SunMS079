/* ==================
 脚本类型: 脚本
 版权：游戏盒团队     
 联系扣扣：297870163    609654666
 =====================
 */var minPlayers=2;function init(){em.setProperty("state","0");em.setProperty("leader","true")}function setup(a,c){em.setProperty("state","1");em.setProperty("leader","true");var b=em.newInstance("Prison"+c);b.setInstanceMap(921160100).resetPQ(a);b.setInstanceMap(921160200).resetPQ(a);b.setInstanceMap(921160300).resetPQ(a);b.setInstanceMap(921160310).resetPQ(a);b.setInstanceMap(921160320).resetPQ(a);b.setInstanceMap(921160330).resetPQ(a);b.setInstanceMap(921160340).resetPQ(a);b.setInstanceMap(921160350).resetPQ(a);b.setInstanceMap(921160400).resetPQ(a);b.setInstanceMap(921160500).resetPQ(a);b.setInstanceMap(921160600).resetPQ(a);var d=b.setInstanceMap(921160700);d.resetPQ(a);d.spawnNpc(9020006,new java.awt.Point(-2161,-186));var e=em.getMonster(9300454);b.registerMonster(e);e.changeLevel(a);d.spawnMonsterOnGroundBelow(e,new java.awt.Point(-2161,-186));b.startEventTimer(12E5);b.setProperty("entryTimestamp",""+java.lang.System.currentTimeMillis());return b}function playerEntry(a,c){var b=a.getMapInstance(0);c.changeMap(b,b.getPortal(0))}function playerRevive(a,c){a.unregisterPlayer(c);a.disposeIfPlayerBelow(0,0)&&(em.setProperty("state","0"),em.setProperty("leader","true"));return!0}function scheduledTimeout(a){if(null==a.getProperty("kentaSaving")||a.getProperty("kentaSaving").equals("0"))end(a);else{var c=parseInt(a.getProperty("kentaSaving"));a.setProperty("kentaSaving","0");a.getMapInstance(10).setSpawns(!1);a.getMapInstance(10).killAllMonsters(!0);a.restartEventTimer(c)}}function changedMap(a,c,b){921160100>b||921160700<b?(a.unregisterPlayer(c),a.disposeIfPlayerBelow(0,0)&&(em.setProperty("state","0"),em.setProperty("leader","true"))):921160600==b&&null==a.getProperty("kentaSaving")&&(c=12E5-(java.lang.System.currentTimeMillis()-parseInt(a.getProperty("entryTimestamp"))),a.setProperty("kentaSaving",""+c),a.restartEventTimer(18E4))}function playerDisconnected(a,c){return 0}function monsterValue(a,c){return 1}function playerExit(a,c){a.unregisterPlayer(c);a.disposeIfPlayerBelow(0,0)&&(em.setProperty("state","0"),em.setProperty("leader","true"))}function end(a){a.disposeIfPlayerBelow(100,92116E4);em.setProperty("state","0");em.setProperty("leader","true")}function clearPQ(a){end(a)}function allMonstersDead(a){}function leftParty(a,c){end(a)}function disbandParty(a){end(a)}function playerDead(a,c){}function cancelSchedule(){};