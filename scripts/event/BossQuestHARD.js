/* ==================
 脚本类型: 脚本
 版权：游戏盒团队     
 联系扣扣：297870163    609654666
 =====================
 */var eventmapid=551030200,returnmap=91E7,monster=[8220004,8220005,8220006,8300006,8300007,9400121,9400405,9420549,9420544,8800002];function init(){}function setup(b){b=em.newInstance("BossQuest"+b);var a=b.createInstanceMapS(eventmapid);a.toggleDrops();a.spawnNpc(9250156,new java.awt.Point(-364,220));b.setProperty("points",0);b.setProperty("monster_number",0);beginQuest(b);return b}function beginQuest(b){null!=b&&b.startEventTimer(5E3)}function monsterSpawn(b){var a=monster[parseInt(b.getProperty("monster_number"))],c=em.getMonster(a);switch(a){case 8220004:case 8220005:case 8220006:a=em.newMonsterStats();a.setOExp(c.getMobExp());a.setOHp(2*c.getMobMaxHp());a.setOMp(c.getMobMaxMp());c.setOverrideStats(a);break;case 8300006:a=em.newMonsterStats();a.setOExp(.5*c.getMobExp());a.setOHp(.7*c.getMobMaxHp());a.setOMp(c.getMobMaxMp());c.setOverrideStats(a);break;case 9400121:a=em.newMonsterStats();a.setOExp(c.getMobExp());a.setOHp(1.8*c.getMobMaxHp());a.setOMp(c.getMobMaxMp());c.setOverrideStats(a);break;case 9400405:a=em.newMonsterStats();a.setOExp(1*c.getMobExp());a.setOHp(2.6*c.getMobMaxHp());a.setOMp(c.getMobMaxMp());c.setOverrideStats(a);break;case 9420549:case 9420544:a=em.newMonsterStats();a.setOExp(.8*c.getMobExp());a.setOHp(1.8*c.getMobMaxHp());a.setOMp(c.getMobMaxMp());c.setOverrideStats(a);break;case 8800002:a=em.newMonsterStats(),a.setOExp(1*c.getMobExp()),a.setOHp(2.6*c.getMobMaxHp()),a.setOMp(c.getMobMaxMp()),c.setOverrideStats(a)}b.registerMonster(c);b.getMapInstance(0).spawnMonsterOnGroundBelow(c,new java.awt.Point(-364,640))}function playerEntry(b,a){var c=b.getMapInstance(0);a.changeMap(c,c.getPortal(0))}function changedMap(b,a,c){c!=eventmapid&&(b.unregisterPlayer(a),b.disposeIfPlayerBelow(0,0))}function scheduledTimeout(b){var a=parseInt(b.getProperty("monster_number"));a<monster.length?(monsterSpawn(b),b.setProperty("monster_number",a+1)):b.disposeIfPlayerBelow(100,returnmap)}function allMonstersDead(b){b.restartEventTimer(3E3);var a=parseInt(b.getProperty("monster_number")),c=350*a,d=parseInt(b.getProperty("points"))+c;b.setProperty("points",d);b.broadcastPlayerMsg(5,"\u4f60\u7684\u56e2\u961f\u8d62\u4e86 "+c+" \u70b9\uff01 \u603b\u5171\u6709 "+d+".");b.saveBossQuest(c);a<monster.length?b.broadcastPlayerMsg(6,"\u51c6\u5907\uff01 \u4e0b\u4e00\u4e2aB\u4f1a\u77a5\u89c1\u773c\u775b!"):(b.saveBossQuest(1E4),b.broadcastPlayerMsg(5,"\u4f60\u7684\u961f\u4f0d\u6253\u4e86HARD\u6a21\u5f0f\uff0c\u5e76\u83b7\u5f97\u4e86\u989d\u5916\u768410,000\u70b9!"))}function playerDead(b,a){}function playerRevive(b,a){return!0}function playerDisconnected(b,a){return 0}function monsterValue(b,a){return 0}function leftParty(b,a){b.unregisterPlayer(a);var c=em.getMapFactory().getMap(returnmap);a.changeMap(c,c.getPortal(0));b.disposeIfPlayerBelow(0,0)}function disbandParty(b,a){b.disposeIfPlayerBelow(100,returnmap)}function clearPQ(b){}function removePlayer(b,a){b.dispose()}function registerCarnivalParty(b,a){}function onMapLoad(b,a){}function cancelSchedule(){};