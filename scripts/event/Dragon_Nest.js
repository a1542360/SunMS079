/* ==================
 脚本类型: 脚本
 版权：游戏盒团队     
 联系扣扣：297870163    609654666
 =====================
 */var minPlayers=3;function init(){em.setProperty("state","0");em.setProperty("leader","true")}function setup(a,c){em.setProperty("state","1");em.setProperty("leader","true");var b=em.newInstance("Dragonica"+c);b.setInstanceMap(240080600).resetPQ(a);b.setInstanceMap(240080700);var e=b.setInstanceMap(240080800);e.resetPQ(a);var d=em.getMonster(8300007);d.changeLevel(a);b.registerMonster(d);e.spawnMonsterOnGroundBelow(d,new java.awt.Point(700,-10));b.startEventTimer(12E5);return b}function playerEntry(a,c){var b=a.getMapInstance(0);c.changeMap(b,b.getPortal(0))}function playerRevive(a,c){var b=a.getMapInstance(0==a.getMapInstance(0).getAllMonstersThreadsafe().size()?2:0);c.addHP(50);c.changeMap(b,b.getPortal(0));return!0}function scheduledTimeout(a){end(a)}function changedMap(a,c,b){240080600!=b&&240080700!=b&&240080800!=b&&240080040!=b&&240080050!=b&&(a.unregisterPlayer(c),b=em.getChannelServer().getMapFactory().getMap(240080050),c.changeMap(b,b.getPortal(0)),a.disposeIfPlayerBelow(0,0)&&(em.setProperty("state","0"),em.setProperty("leader","true")))}function playerDisconnected(a,c){return 0}function monsterValue(a,c){return 1}function playerExit(a,c){a.unregisterPlayer(c);a.disposeIfPlayerBelow(0,0)&&(em.setProperty("state","0"),em.setProperty("leader","true"))}function end(a){a.disposeIfPlayerBelow(100,240080050);em.setProperty("state","0");em.setProperty("leader","true")}function clearPQ(a){end(a)}function allMonstersDead(a){0==a.getMapInstance(2).getAllMonstersThreadsafe().size()&&(a.getMapInstance(2).spawnNpc(2085003,new java.awt.Point(700,-10)),a.broadcastPlayerMsg(6,"\u68a6\u5e7b\u9f99\u65cf\u53c8\u88ab\u6bb4\u6253\uff01\u8ba9\u961f\u957f\u8fdb\u5165\u95e8\u5b8c\u6210!"))}function leftParty(a,c){end(a)}function disbandParty(a){end(a)}function playerDead(a,c){}function cancelSchedule(){};